<!DOCTYPE html>
<html>
<head>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/redux/3.0.4/redux.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/maquette/2.1.6/maquette.min.js"></script>
  <script>
var createStore = Redux.createStore;
var h = maquette.h;
var projector = maquette.createProjector();

var beachesReducer = function(state, action) {
   if (state === undefined) {
      return {'beaches': [],
              'title': 'Click here to add a beach'};
   }
   switch (action.type) {
      case 'ADD_BEACH':
         state.beaches.push(action.beach);
         return state;
      case 'REMOVE_BEACH':
         // Very naive removal
         delete state.beaches[action.index];
         return state
      default:
         return state;
   }

}
var store = createStore(beachesReducer);


store.subscribe(function() {
    projector.scheduleRender();
});

function removeBeach() {
   store.dispatch({
      type: 'REMOVE_BEACH',
      index: this.id 
   });
}

function addBeach() {
   store.dispatch({
      type: 'ADD_BEACH',
      beach: {'name': 'beach name'}
   });
}

function renderMaquette() {
   return h('div', [
      // Title div
      h('div', {onclick: addBeach}, store.getState().title),

      // List of beaches
      store.getState().beaches.map(function(beach, index) {
         // Each row has the beach name and a remove link
         return h('div', {
            key: beach.name + index
         }, [beach.name + " " + index, 
             h('a', {href: '#', id: index, onclick: removeBeach}, 'Remove')]);
      })
   ]);
}

document.addEventListener('DOMContentLoaded', function() {
   projector.append(document.body, renderMaquette);
});





  </script>
</head>

<body>
</body>

</html>
